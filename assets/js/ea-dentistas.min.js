let map,marker,lat,lng,autocomplete;function initGoogleApi(){initMap(),initAutocomplete()}function initMap(){var e=document.getElementById("map");if(e){lat,lat&&(lng,lng)||(lat="-23.5502909",lng="-46.6341887"),lat=Number(lat),lng=Number(lng);var t={lat:lat,lng:lng},e=(console.log("2 - lat",lat),console.log("2 - lng",lng),map=new google.maps.Map(e,{zoom:12,center:t,mapTypeControl:!1}),ajax_object.listagem);const r=[],c=[];e.map((e,t)=>{var n={lat:e.lat,lng:e.long};const o=`<div>
                <h5>${e.nome_fantasia}</h5>
                <address>
                Endereço: ${e.endereco}
                Telefone: ${e.telefone}
                </address>
            </div>`,a=new google.maps.InfoWindow({content:o,ariaLabel:e.nome_fantasia});c.push(a);var l,n=new google.maps.Marker({position:n,map:map,title:e.nome_fantasia});return google.maps.event.addListener(n,"click",(l=n,function(){a.setContent(o),a.open(map,l)})),r.push(n),e});for(const n of document.querySelectorAll(".listagem-item-btn"))!function(n,o){n.addEventListener("click",e=>{e.preventDefault();for(const t of c)t.close();e=n.dataset.markerid;o.maps.event.trigger(r[e],"click")})}(n,google)}}function initAutocomplete(){var e=document.getElementById("autocomplete");e&&(autocomplete=new google.maps.places.Autocomplete(e,{componentRestrictions:{country:["BR"]},fields:["place_id","geometry","name"]})).addListener("place_changed",onPlaceChanged)}function onPlaceChanged(){var e=autocomplete.getPlace(),t=document.querySelector(".ea-autocomplete-form"),n=t.querySelector('input[name="lat"]'),o=t.querySelector('input[name="lng"]');t?n?o?e.geometry?(lat=e.geometry.location.lat(),lng=e.geometry.location.lng(),console.log("lat",lat),console.log("lng",lng),document.getElementById("autocomplete").innerHTML=e.name,n.value=lat,o.value=lng):(document.getElementById("autocomplete").placeholder="Digite um endereço",n.value="",o.value=""):console.error("Não foi possível encontrar o input de longitude"):console.error("Não foi possível encontrar o input de latitude"):console.error("Não foi possível encontrar o formulário do autocomplete")}function addPageNumbers(t,n,o,a,l){var r=Number(n.querySelector('input[name="current-page"]').value);for(let e=1;e<=o;e++){var c=document.createElement("li"),i=(c.classList.add("page-number"),r===e&&c.classList.add("current"),document.createElement("button"));i.innerText=e,i.dataset.pageIndex=e,c.append(i),t.append(c),changeCurrentPage(i,a,l,t,n)}}function setCurrentPage(e,t,n){var o=Number(t.querySelector('input[name="current-page"]').value)*n,a=o-n;let l=1;for(const r of e)l<=a||l>o?r.style.display="none":r.style.display="",l++}function changeCurrentPage(a,l,r,c,i){a.addEventListener("click",t=>{t.preventDefault();var t=i.querySelector('input[name="current-page"]'),n=Number(a.dataset.pageIndex),e=a.parentElement;if(e&&!e.classList.contains("current")){t.value=n;let e=1;for(const o of c.querySelectorAll(".page-number"))o.classList.remove("current"),e===n&&o.classList.add("current"),e++;setCurrentPage(l,i,r)}})}function eaPaginationPrevNext(e,t,n,o,a){e.addEventListener("click",e=>{e.preventDefault();var e=Number(a.querySelector('input[name="current-page"]').value),t=o.querySelectorAll(".page-number");e<=1||t[e-2].querySelector("button").click()}),t.addEventListener("click",e=>{e.preventDefault();var e=Number(a.querySelector('input[name="current-page"]').value),t=o.querySelectorAll(".page-number");t.length<=e||t[e].querySelector("button").click()})}function eaDentistasPagination(){for(const r of document.querySelectorAll(".pagination-list")){var e=r.querySelectorAll(".listagem-item"),t=e.length,t=Math.ceil(t/3),n=r.parentElement.querySelector(".pagination-container");if(!n)return;var o=n.querySelector(".pagination-numbers");if(!o)return;var a=n.querySelector(".pagination-prev"),l=n.querySelector(".pagination-next");addPageNumbers(o,n,t,e,3),setCurrentPage(e,n,3),eaPaginationPrevNext(a,l,e,o,n)}}function eaDentistasGetGeolocation({lat:t,lng:n}){navigator.geolocation.getCurrentPosition(function(e){return console.log("Deu certo!"),t=e.coords.latitude,n=e.coords.longitude,console.log("1 - lat",t),console.log("1 - lng",n),{lat:t,lng:n}},function(e){console.log("Deu erro",e)})}lat=ajax_object.lat,lng=ajax_object.lng,document.addEventListener("DOMContentLoaded",function(){eaDentistasPagination()});